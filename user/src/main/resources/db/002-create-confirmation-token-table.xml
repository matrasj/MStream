<databaseChangeLog>
    <changeSet id="002-create-confirmation-token-table" author="matrasj">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="confirmation_token"/>
            </not>
        </preConditions>
        <changes>
            <createTable tableName="confirmation_token">
                <columns>
                    <column name="id" type="bigint" autoIncrement="true">
                        <constraints primaryKey="true" nullable="false"/>
                    </column>
                    <column name="token" type="VARCHAR">
                        <constraints nullable="false"/>
                    </column>
                    <column name="expires_at" type="timestamp without time zone">
                        <constraints nullable="false"/>
                    </column>
                    <column name="confirmed_at" type="timestamp without time zone"/>
                    <column name="user_account_id" type="BIGINT">
                        <constraints nullable="false"
                                     referencedColumnNames="id"
                                     referencedTableName="user_account"
                                     foreignKeyName="fk_confirmation_token_user_account"/>
                    </column>
                </columns>
            </createTable>
        </changes>
    </changeSet>
</databaseChangeLog>